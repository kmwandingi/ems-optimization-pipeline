# Convergence Analysis Results

This directory contains convergence analysis plots for all buildings in the EMS optimization dataset.

## Generated by
`scripts/convergence_analysis_all_buildings.py`

## Methodology
- **Reference Distribution**: Computed from full historical data for each building (600+ days for most buildings)
- **Incremental Training**: Trained on prefixes from 1 to 50 days to show convergence over time
- **Real Data**: Uses actual device usage patterns from parquet files, no synthetic data
- **Metrics**: Four convergence metrics computed at each training prefix length

## Buildings Processed
- **DE_KN_residential1**: 4 devices, 661 days (2015-05-22 to 2017-03-12)
- **DE_KN_residential2**: 4 devices, 1038 days (2015-04-02 to 2018-02-02)
- **DE_KN_residential3**: 5 devices, 1383 days (2014-12-12 to 2018-09-24)
- **DE_KN_residential4**: 6 devices, 847 days (2015-10-11 to 2018-02-03)
- **DE_KN_residential5**: 3 devices, 980 days (2015-10-27 to 2018-07-02)
- **DE_KN_residential6**: 4 devices, 896 days (2015-10-25 to 2018-04-07)
- **DE_KN_industrial3**: 17 devices, 597 days (2015-10-16 to 2017-06-03)

## Plot Types

Each building directory contains:

### Core Convergence Plots (4 per building)
1. **`js_divergence.png`**: Jensen-Shannon divergence to reference distribution vs. training days
   - Shows how learned distributions converge to the reference (full historical) distribution
   - Lower values = closer to reference distribution

2. **`entropy.png`**: Entropy of learned distribution vs. training days
   - Shows uncertainty/randomness in learned distributions over time
   - Lower entropy = more peaked/certain distributions

3. **`learning_rate.png`**: Learning rate (Δ JS divergence) vs. training days
   - Shows improvement in convergence between consecutive training lengths
   - Positive values = improvement (reduced divergence)

### Device-Specific Evolution Plots (1 per device)
4. **`dist_evolution_<device>.png`**: Distribution evolution waveforms
   - Shows how probability distributions evolve over selected training checkpoints
   - X-axis: Hour of day (0-23)
   - Y-axis: Probability
   - Multiple lines: Different training day checkpoints (1, 5, 10, 20, 30, final)

## Device Types Found
- **Residential**: dishwasher, washing_machine, heat_pump, freezer, refrigerator, circulation_pump, ev
- **Industrial**: area_offices, area_room_*, machine_*, compressor, cooling_*, dishwasher, ev, refrigerator, ventilation

## Styling
- Plots use Seaborn with ggplot-style aesthetics
- High-resolution PNG files (300 DPI)
- Clear legends and axis labels
- Grid lines for easy reading

## Total Output
- **64 total plots** across 7 buildings
- **20 core metric plots** (3 × 7 buildings except learning_rate excludes day 1)
- **44 device evolution plots** across all devices in all buildings

Generated on: 2025-06-10